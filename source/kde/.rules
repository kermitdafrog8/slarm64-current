
rules() {
    if [[ -z $start_kde_build ]];then
        start_kde_build="yes"
        remove_work_dir "$t"
        prepare_work_dir "$t"
    fi

    pushd ${SLARM64_SOURCE_PATH}/$t 2>&1>/dev/null
    patching_files STATUS
    popd 2>&1>/dev/null
    pushd ${SLARM64_SOURCE_PATH}/$t/${WORK_DIR} 2>&1>/dev/null
    _MODULE=$(sed '/./{H;$!d};x;/'$p'/!d;' modularize | grep -oP '(?<=^#\s).*' | sed 's#\:$##g')
    ./kde.SlackBuild ${_MODULE}:${p} 2>&1 | tee ${p}.build.log
    [[ ${PIPESTATUS[0]} == 1 ]] && ERROR=1
    move_pkg ${t} "kde_build/${p}"
    popd 2>&1>/dev/null
}

rules

