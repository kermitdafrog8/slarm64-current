--- a/reiserfsprogs.SlackBuild	2017-09-22 21:54:56.622452012 +0100
+++ b/reiserfsprogs.SlackBuild	2017-09-22 21:49:59.105451870 +0100
@@ -34,19 +34,26 @@
   esac
 fi
 
-NUMJOBS=${NUMJOBS:-" -j7 "}
+NUMJOBS=${NUMJOBS:-" -j4 "}
 
 CWD=$(pwd)
 TMP=${TMP:-/tmp}
 PKG=$TMP/package-reiserfs
 
-if [ "$ARCH" = "i486" ]; then
-  SLKCFLAGS="-O2 -march=i486 -mtune=i686"
-elif [ "$ARCH" = "s390" ]; then
-  SLKCFLAGS="-O2"
-elif [ "$ARCH" = "x86_64" ]; then
-  SLKCFLAGS="-O2 -fPIC"
-fi
+case "$ARCH" in
+     i?86) SLKCFLAGS="-O2 -march=i586 -mtune=i686"
+           LIBDIRSUFFIX=""
+           ;;
+   x86_64) SLKCFLAGS="-O2 -fPIC"
+           LIBDIRSUFFIX="64"
+           ;;
+  aarch64) SLKCFLAGS="-O2"
+           LIBDIRSUFFIX="64"
+           ;;
+        *) SLKCFLAGS="-O2"
+           LIBDIRSUFFIX=""
+           ;;
+esac
 
 rm -rf $PKG
 mkdir -p $TMP $PKG
@@ -62,7 +69,7 @@
   \( -perm 666 -o -perm 664 -o -perm 600 -o -perm 444 -o -perm 440 -o -perm 400 \) \
   -exec chmod 644 {} \;
 
-CFLAGS="$SLKCFLAGS" \
+CFLAGS="$SLKCFLAGS -fgnu89-inline" \
 ./configure \
   --prefix=/usr \
   --sbindir=/sbin \
