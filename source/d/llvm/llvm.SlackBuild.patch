--- a/llvm.SlackBuild	2021-02-19 22:06:48.981590491 +0200
+++ b/llvm.SlackBuild	2021-02-19 22:08:24.863775026 +0200
@@ -59,6 +59,12 @@
 elif [ "$ARCH" = "x86_64" ]; then
   SLKCFLAGS="-O2 -fPIC"
   LIBDIRSUFFIX="64"
+elif [ "$ARCH" = "aarch64" ]; then
+  SLKCFLAGS="-O2 -fPIC"
+  LIBDIRSUFFIX="64"
+elif [ "$ARCH" = "riscv64" ]; then
+  SLKCFLAGS="-O2 -fPIC"
+  LIBDIRSUFFIX="64"
 else
   SLKCFLAGS="-O2"
   LIBDIRSUFFIX=""
@@ -118,6 +124,15 @@
 # Hack to fix build with polly. Maybe we should just not use polly... ?
 zcat $CWD/llvm.polly.hack.diff.gz | patch -p1 --verbose || exit 1
 
+xzcat $CWD/clang.dynamic.linker.aarch64.patch.xz | patch -p1 --verbose || exit 1
+xzcat $CWD/clang.toolchains.aarch64.triple.patch.xz | patch -p1 --verbose || exit 1
+
+xzcat $CWD/clang.dynamic.linker.riscv64.patch.xz | patch -p1 --verbose || exit 1
+xzcat $CWD/clang.toolchains.riscv64.triple.patch.xz | patch -p1 --verbose || exit 1
+
+# Better detect 64bit atomics support.
+xzcat $CWD/llvm-better-detect-64bit-atomics-support.patch.xz | patch -p1 --verbose || exit 1
+
 # As of clang-tools-extra-7.0.0 we get the following error on i586 or i686:
 # CMakeFiles/clangDaemon.dir/Trace.cpp.o:Trace.cpp:function std::unique_ptr<clang::clangd::trace::(anonymous namespace)::JSONTracer::JSONSpan, std::default_delete<clang::clangd::trace::(anonymous namespace)::JSONTracer::JSONSpan> >::~unique_ptr(): error: undefined reference to '__atomic_load_8'
 # Attempts to try to fix this have failed here, so for now we will not build
